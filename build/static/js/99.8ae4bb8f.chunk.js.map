{"version":3,"sources":["app/views/extra-kits/AppImageCropper.jsx"],"names":["AppImageCropper","state","src","crop","aspect","img","handleFileSelect","event","file","target","files","URL","createObjectURL","setState","handleCrop","a","getCroppedImg","croppedImage","image","fileName","canvas","document","createElement","scaleX","naturalWidth","width","scaleY","naturalHeight","height","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","blob","name","this","routeSegments","path","htmlFor","className","as","onChange","id","type","accept","onClick","circularCrop","onImageLoaded","newCrop","Component"],"mappings":"6OAKMA,E,4MACJC,MAAQ,CACNC,IAAK,kCACLC,KAAM,CAAEC,OAAQ,GAChBC,IAAK,M,EAGPC,iBAAmB,SAAAC,GACjB,IAAIC,EAAOD,EAAME,OAAOC,MAAM,GAC1BR,EAAMS,IAAIC,gBAAgBJ,GAC9B,EAAKK,SAAS,CACZX,S,EAIJY,W,sBAAa,kCAAAC,EAAA,2DACS,EAAKd,MAAnBE,EADK,EACLA,KAAME,EADD,EACCA,IADD,iEAIc,EAAKW,cAAcX,EAAKF,EAAM,QAJ5C,OAIPc,EAJO,OAKX,EAAKJ,SAAS,CAAEX,IAAKS,IAAIC,gBAAgBK,KAL9B,2C,EAQbD,cAAgB,SAACE,EAAOf,EAAMgB,GAC5B,IAAMC,EAASC,SAASC,cAAc,UAChCC,EAASL,EAAMM,aAAeN,EAAMO,MACpCC,EAASR,EAAMS,cAAgBT,EAAMU,OAsB3C,OApBAR,EAAOK,MAAQtB,EAAKsB,MACpBL,EAAOQ,OAASzB,EAAKyB,OACTR,EAAOS,WAAW,MAE1BC,UACFZ,EACAf,EAAK4B,EAAIR,EACTpB,EAAK6B,EAAIN,EACTvB,EAAKsB,MAAQF,EACbpB,EAAKyB,OAASF,EACd,EACA,EACAvB,EAAKsB,MACLtB,EAAKyB,QAOA,IAAIK,SAAQ,SAACC,EAASC,GAC3Bf,EAAOgB,QACL,SAAAC,GACEA,EAAKC,KAAOnB,EACZe,EAAQG,KAEV,aACA,O,4CAKN,WAAU,IAAD,OACP,EAAoBE,KAAKtC,MAAnBC,EAAN,EAAMA,IAAKC,EAAX,EAAWA,KAEX,OACE,6BACE,kBAAC,IAAD,CACEqC,cAAe,CACb,CAAEF,KAAM,OAAQG,KAAM,KACtB,CAAEH,KAAM,aAAcG,KAAM,eAC5B,CAAEH,KAAM,oBAGZ,2BAAOI,QAAQ,sBACb,kBAAC,IAAD,CAAQC,UAAU,wBAAwBC,GAAG,QAC3C,yBAAKD,UAAU,oBACb,uBAAGA,UAAU,oBAAb,KACA,gDAIN,2BACEA,UAAU,SACVE,SAAUN,KAAKjC,iBACfwC,GAAG,qBACHC,KAAK,OACLC,OAAO,YAGT,kBAAC,IAAD,CAAQC,QAASV,KAAKzB,WAAY6B,UAAU,oBAA5C,cAIA,yBAAKA,UAAU,WACb,kBAAC,IAAD,CACEzC,IAAKA,EACLC,KAAMA,EACN+C,cAAc,EACdC,cAAe,SAAAjC,GAAK,OAAI,EAAKL,SAAS,CAAER,IAAKa,KAC7C2B,SAAU,SAAAO,GACR,EAAKvC,SAAS,CAAEV,KAAMiD,a,GAnGNC,aA4GfrD","file":"static/js/99.8ae4bb8f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Breadcrumb, SimpleCard } from \"@gull\";\r\nimport ReactCrop from \"react-image-crop\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\nclass AppImageCropper extends Component {\r\n  state = {\r\n    src: \"/assets/images/photo-wide-3.jpg\",\r\n    crop: { aspect: 1 / 1 },\r\n    img: null\r\n  };\r\n\r\n  handleFileSelect = event => {\r\n    let file = event.target.files[0];\r\n    let src = URL.createObjectURL(file);\r\n    this.setState({\r\n      src\r\n    });\r\n  };\r\n\r\n  handleCrop = async () => {\r\n    let { crop, img } = this.state;\r\n    if (!img) return;\r\n\r\n    let croppedImage = await this.getCroppedImg(img, crop, \"test\");\r\n    this.setState({ src: URL.createObjectURL(croppedImage) });\r\n  };\r\n\r\n  getCroppedImg = (image, crop, fileName) => {\r\n    const canvas = document.createElement(\"canvas\");\r\n    const scaleX = image.naturalWidth / image.width;\r\n    const scaleY = image.naturalHeight / image.height;\r\n\r\n    canvas.width = crop.width;\r\n    canvas.height = crop.height;\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    ctx.drawImage(\r\n      image,\r\n      crop.x * scaleX,\r\n      crop.y * scaleY,\r\n      crop.width * scaleX,\r\n      crop.height * scaleY,\r\n      0,\r\n      0,\r\n      crop.width,\r\n      crop.height\r\n    );\r\n\r\n    // As Base64 string\r\n    // const base64Image = canvas.toDataURL('image/jpeg');\r\n\r\n    // As a blob\r\n    return new Promise((resolve, reject) => {\r\n      canvas.toBlob(\r\n        blob => {\r\n          blob.name = fileName;\r\n          resolve(blob);\r\n        },\r\n        \"image/jpeg\",\r\n        1\r\n      );\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let { src, crop } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <Breadcrumb\r\n          routeSegments={[\r\n            { name: \"Home\", path: \"/\" },\r\n            { name: \"Extra Kits\", path: \"/extra-kits\" },\r\n            { name: \"Image Cropper\" }\r\n          ]}\r\n        ></Breadcrumb>\r\n        <label htmlFor=\"upload-single-file\">\r\n          <Button className=\"btn-rounded mr-3 mb-3\" as=\"span\">\r\n            <div className=\"flex flex-middle\">\r\n              <i className=\"i-Share-on-Cloud\"> </i>\r\n              <span>Single File</span>\r\n            </div>\r\n          </Button>\r\n        </label>\r\n        <input\r\n          className=\"d-none\"\r\n          onChange={this.handleFileSelect}\r\n          id=\"upload-single-file\"\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n        />\r\n\r\n        <Button onClick={this.handleCrop} className=\"btn-rounded mb-3\">\r\n          Crop Image\r\n        </Button>\r\n\r\n        <div className=\"d-block\">\r\n          <ReactCrop\r\n            src={src}\r\n            crop={crop}\r\n            circularCrop={true}\r\n            onImageLoaded={image => this.setState({ img: image })}\r\n            onChange={newCrop => {\r\n              this.setState({ crop: newCrop });\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppImageCropper;\r\n"],"sourceRoot":""}