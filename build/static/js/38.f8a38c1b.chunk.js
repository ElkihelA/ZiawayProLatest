(this["webpackJsonpgull-react"]=this["webpackJsonpgull-react"]||[]).push([[38],{1666:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.username,n=e.handleUsernameChange,r=e.roomName,o=e.handleRoomNameChange,c=e.handleSubmit,i=e.connecting;return a.a.createElement("form",{onSubmit:c},a.a.createElement("h2",null,"Enter a room"),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"name"},"Name:"),a.a.createElement("input",{type:"text",id:"field",value:t,onChange:n,readOnly:i,required:!0})),a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"room"},"Room name:"),a.a.createElement("input",{type:"text",id:"room",value:r,onChange:o,readOnly:i,required:!0})),a.a.createElement("button",{type:"submit",disabled:i},i?"Connecting":"Join"))}},1672:function(e,t,n){"use strict";var r=n(15),a=n(26),o=n(0),c=n.n(o),i=function(e){var t=e.participant,n=Object(o.useState)([]),i=Object(a.a)(n,2),u=i[0],l=i[1],s=Object(o.useState)([]),f=Object(a.a)(s,2),d=f[0],v=f[1],m=Object(o.useRef)(),p=Object(o.useRef)(),h=function(e){return Array.from(e.values()).map((function(e){return e.track})).filter((function(e){return null!==e}))};return Object(o.useEffect)((function(){l(h(t.videoTracks)),v(h(t.audioTracks));return t.on("trackSubscribed",(function(e){"video"===e.kind?l((function(t){return[].concat(Object(r.a)(t),[e])})):"audio"===e.kind&&v((function(t){return[].concat(Object(r.a)(t),[e])}))})),t.on("trackUnsubscribed",(function(e){"video"===e.kind?l((function(t){return t.filter((function(t){return t!==e}))})):"audio"===e.kind&&v((function(t){return t.filter((function(t){return t!==e}))}))})),function(){l([]),v([]),t.removeAllListeners()}}),[t]),Object(o.useEffect)((function(){var e=u[0];if(e)return e.attach(m.current),function(){e.detach()}}),[u]),Object(o.useEffect)((function(){var e=d[0];if(e)return e.attach(p.current),function(){e.detach()}}),[d]),c.a.createElement("div",{className:"participant"},c.a.createElement("h3",null,t.identity),c.a.createElement("video",{ref:m,autoPlay:!0}),c.a.createElement("audio",{ref:p,autoPlay:!0,muted:!0}))};t.a=function(e){var t=e.roomName,n=e.room,u=e.handleLogout;console.log("room",n);var l=Object(o.useState)([]),s=Object(a.a)(l,2),f=s[0],d=s[1];Object(o.useEffect)((function(){var e=function(e){d((function(t){return[].concat(Object(r.a)(t),[e])}))},t=function(e){d((function(t){return t.filter((function(t){return t!==e}))}))};return n.on("participantConnected",e),n.on("participantDisconnected",t),n.participants.forEach(e),function(){n.off("participantConnected",e),n.off("participantDisconnected",t)}}),[n]);var v=f.map((function(e){return c.a.createElement(i,{key:e.sid,participant:e})}));return c.a.createElement("div",{className:"room"},c.a.createElement("h2",null,"Room: ",t),c.a.createElement("button",{onClick:u},"Log out"),c.a.createElement("div",{className:"local-participant"},n?c.a.createElement(i,{key:n.localParticipant.sid,participant:n.localParticipant}):""),c.a.createElement("h3",null,"Remote Participants"),c.a.createElement("div",{className:"remote-participants"},v))}},2681:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"v1",(function(){return p})),n.d(t,"v3",(function(){return C})),n.d(t,"v4",(function(){return S})),n.d(t,"v5",(function(){return A})),n.d(t,"NIL",(function(){return N})),n.d(t,"version",(function(){return I})),n.d(t,"validate",(function(){return i})),n.d(t,"stringify",(function(){return d})),n.d(t,"parse",(function(){return h}));var a=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=function(e){return"string"===typeof e&&c.test(e)},u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));var s,f,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!i(n))throw TypeError("Stringified UUID is invalid");return n},v=0,m=0;var p=function(e,t,n){var r=t&&n||0,a=t||new Array(16),c=(e=e||{}).node||s,i=void 0!==e.clockseq?e.clockseq:f;if(null==c||null==i){var u=e.random||(e.rng||o)();null==c&&(c=s=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==i&&(i=f=16383&(u[6]<<8|u[7]))}var l=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:m+1,h=l-v+(p-m)/1e4;if(h<0&&void 0===e.clockseq&&(i=i+1&16383),(h<0||l>v)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=l,m=p,f=i;var b=(1e4*(268435455&(l+=122192928e5))+p)%4294967296;a[r++]=b>>>24&255,a[r++]=b>>>16&255,a[r++]=b>>>8&255,a[r++]=255&b;var g=l/4294967296*1e4&268435455;a[r++]=g>>>8&255,a[r++]=255&g,a[r++]=g>>>24&15|16,a[r++]=g>>>16&255,a[r++]=i>>>8|128,a[r++]=255&i;for(var y=0;y<6;++y)a[r+y]=c[y];return t||d(a)};var h=function(e){if(!i(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};var b=function(e,t,n){function r(e,r,a,o){if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof r&&(r=h(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(r),c.set(e,r.length),(c=n(c))[6]=15&c[6]|t,c[8]=63&c[8]|128,a){o=o||0;for(var i=0;i<16;++i)a[o+i]=c[i];return a}return d(c)}try{r.name=e}catch(a){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function g(e){return 14+(e+64>>>9<<4)+1}function y(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function E(e,t,n,r,a,o){return y((c=y(y(t,e),y(r,o)))<<(i=a)|c>>>32-i,n);var c,i}function O(e,t,n,r,a,o,c){return E(t&n|~t&r,e,t,a,o,c)}function j(e,t,n,r,a,o,c){return E(t&r|n&~r,e,t,a,o,c)}function w(e,t,n,r,a,o,c){return E(t^n^r,e,t,a,o,c)}function k(e,t,n,r,a,o,c){return E(n^(t|~r),e,t,a,o,c)}var C=b("v3",48,(function(e){if("string"===typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r=0;r<n;r+=8){var a=e[r>>5]>>>r%32&255,o=parseInt("0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[g(t)-1]=t;for(var n=1732584193,r=-271733879,a=-1732584194,o=271733878,c=0;c<e.length;c+=16){var i=n,u=r,l=a,s=o;n=O(n,r,a,o,e[c],7,-680876936),o=O(o,n,r,a,e[c+1],12,-389564586),a=O(a,o,n,r,e[c+2],17,606105819),r=O(r,a,o,n,e[c+3],22,-1044525330),n=O(n,r,a,o,e[c+4],7,-176418897),o=O(o,n,r,a,e[c+5],12,1200080426),a=O(a,o,n,r,e[c+6],17,-1473231341),r=O(r,a,o,n,e[c+7],22,-45705983),n=O(n,r,a,o,e[c+8],7,1770035416),o=O(o,n,r,a,e[c+9],12,-1958414417),a=O(a,o,n,r,e[c+10],17,-42063),r=O(r,a,o,n,e[c+11],22,-1990404162),n=O(n,r,a,o,e[c+12],7,1804603682),o=O(o,n,r,a,e[c+13],12,-40341101),a=O(a,o,n,r,e[c+14],17,-1502002290),r=O(r,a,o,n,e[c+15],22,1236535329),n=j(n,r,a,o,e[c+1],5,-165796510),o=j(o,n,r,a,e[c+6],9,-1069501632),a=j(a,o,n,r,e[c+11],14,643717713),r=j(r,a,o,n,e[c],20,-373897302),n=j(n,r,a,o,e[c+5],5,-701558691),o=j(o,n,r,a,e[c+10],9,38016083),a=j(a,o,n,r,e[c+15],14,-660478335),r=j(r,a,o,n,e[c+4],20,-405537848),n=j(n,r,a,o,e[c+9],5,568446438),o=j(o,n,r,a,e[c+14],9,-1019803690),a=j(a,o,n,r,e[c+3],14,-187363961),r=j(r,a,o,n,e[c+8],20,1163531501),n=j(n,r,a,o,e[c+13],5,-1444681467),o=j(o,n,r,a,e[c+2],9,-51403784),a=j(a,o,n,r,e[c+7],14,1735328473),r=j(r,a,o,n,e[c+12],20,-1926607734),n=w(n,r,a,o,e[c+5],4,-378558),o=w(o,n,r,a,e[c+8],11,-2022574463),a=w(a,o,n,r,e[c+11],16,1839030562),r=w(r,a,o,n,e[c+14],23,-35309556),n=w(n,r,a,o,e[c+1],4,-1530992060),o=w(o,n,r,a,e[c+4],11,1272893353),a=w(a,o,n,r,e[c+7],16,-155497632),r=w(r,a,o,n,e[c+10],23,-1094730640),n=w(n,r,a,o,e[c+13],4,681279174),o=w(o,n,r,a,e[c],11,-358537222),a=w(a,o,n,r,e[c+3],16,-722521979),r=w(r,a,o,n,e[c+6],23,76029189),n=w(n,r,a,o,e[c+9],4,-640364487),o=w(o,n,r,a,e[c+12],11,-421815835),a=w(a,o,n,r,e[c+15],16,530742520),r=w(r,a,o,n,e[c+2],23,-995338651),n=k(n,r,a,o,e[c],6,-198630844),o=k(o,n,r,a,e[c+7],10,1126891415),a=k(a,o,n,r,e[c+14],15,-1416354905),r=k(r,a,o,n,e[c+5],21,-57434055),n=k(n,r,a,o,e[c+12],6,1700485571),o=k(o,n,r,a,e[c+3],10,-1894986606),a=k(a,o,n,r,e[c+10],15,-1051523),r=k(r,a,o,n,e[c+1],21,-2054922799),n=k(n,r,a,o,e[c+8],6,1873313359),o=k(o,n,r,a,e[c+15],10,-30611744),a=k(a,o,n,r,e[c+6],15,-1560198380),r=k(r,a,o,n,e[c+13],21,1309151649),n=k(n,r,a,o,e[c+4],6,-145523070),o=k(o,n,r,a,e[c+11],10,-1120210379),a=k(a,o,n,r,e[c+2],15,718787259),r=k(r,a,o,n,e[c+9],21,-343485551),n=y(n,i),r=y(r,u),a=y(a,l),o=y(o,s)}return[n,r,a,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(g(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}));var S=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return d(r)};function R(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function U(e,t){return e<<t|e>>>32-t}var A=b("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var a=0;a<r.length;++a)e.push(r.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,c=Math.ceil(o/16),i=new Array(c),u=0;u<c;++u){for(var l=new Uint32Array(16),s=0;s<16;++s)l[s]=e[64*u+4*s]<<24|e[64*u+4*s+1]<<16|e[64*u+4*s+2]<<8|e[64*u+4*s+3];i[u]=l}i[c-1][14]=8*(e.length-1)/Math.pow(2,32),i[c-1][14]=Math.floor(i[c-1][14]),i[c-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<c;++f){for(var d=new Uint32Array(80),v=0;v<16;++v)d[v]=i[f][v];for(var m=16;m<80;++m)d[m]=U(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);for(var p=n[0],h=n[1],b=n[2],g=n[3],y=n[4],E=0;E<80;++E){var O=Math.floor(E/20),j=U(p,5)+R(O,h,b,g)+y+t[O]+d[E]>>>0;y=g,g=b,b=U(h,30)>>>0,h=p,p=j}n[0]=n[0]+p>>>0,n[1]=n[1]+h>>>0,n[2]=n[2]+b>>>0,n[3]=n[3]+g>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),N="00000000-0000-0000-0000-000000000000";var I=function(e){if(!i(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},2779:function(e,t,n){"use strict";n.r(t);var r=n(347),a=n.n(r),o=n(439),c=n(26),i=n(0),u=n.n(i),l=n(1865),s=n.n(l),f=n(1666),d=n(1672),v=n(94),m=n(31),p=n(101),h=n(36),b=n(2681).v4;t.default=function(){var e=Object(h.g)(),t=Object(h.h)(),n=Object(m.d)((function(e){return e.firebase.profile})),r=Object(i.useState)(!1),l=Object(c.a)(r,2),g=l[0],y=l[1],E=Object(m.d)((function(e){return e.firestore.ordered.Meetings})),O=Object(i.useState)(""),j=Object(c.a)(O,2),w=j[0],k=j[1],C=Object(i.useState)(b()),S=Object(c.a)(C,2),R=S[0],U=S[1],A=Object(i.useState)(null),N=Object(c.a)(A,2),I=N[0],T=N[1],L=Object(i.useState)(!1),M=Object(c.a)(L,2),D=M[0],P=M[1],x=Object(i.useState)(null),q=Object(c.a)(x,2),J=q[0],V=q[1];console.log("params",null===J||void 0===J?void 0:J.id,R),Object(p.useFirestoreConnect)([{collection:"Meetings",where:["callerEmail","==",n.email]}]);var F=Object(i.useCallback)((function(e){k(e.target.value)}),[]),z=Object(i.useCallback)((function(e){U(e.target.value)}),[]),G=Object(i.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),P(!0),e.next=4,fetch("https://us-central1-ziaapp-ac0eb.cloudfunctions.net/GetToken",{method:"POST",body:JSON.stringify({identity:w,room:R}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 4:r=e.sent,console.log("datatoken",r),s.a.connect(r.token,{name:R}).then((function(e){P(!1),T(e),v.a.firestore().collection("Meetings").add({callerEmail:n,RecieverEmail:"shahzad.ftw45@gmail.com",RoomNumber:R})})).catch((function(e){console.error(e),P(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[R,w]),$=Object(i.useCallback)((function(){T((function(e){return e&&(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect()),null}))}),[]);Object(i.useEffect)((function(){if(I){var e=function(e){e.persisted||I&&$()};return window.addEventListener("pagehide",e),window.addEventListener("beforeunload",e),function(){window.removeEventListener("pagehide",e),window.removeEventListener("beforeunload",e)}}}),[I,$]);var B=function(){var e=Object(o.a)(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,fetch("https://us-central1-ziaapp-ac0eb.cloudfunctions.net/GetToken",{method:"POST",body:JSON.stringify({identity:null===n||void 0===n?void 0:n.email,room:R}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 3:r=e.sent,s.a.connect(r.token,{name:R}).then((function(e){P(!1),T(e),v.a.firestore().collection("Meetings").add({callerEmail:null===n||void 0===n?void 0:n.email,RecieverEmail:null===t||void 0===t?void 0:t.state,RoomNumber:R}),y(!1)})).catch((function(e){console.error(e),y(!1)}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){E&&V(E[0])}),[E]),Object(i.useEffect)((function(){B()}),[]),!0===g?u.a.createElement(u.a.Fragment,null,"loading..."):I?u.a.createElement(d.a,{roomName:R,room:I,handleLogout:function(){console.log(J),v.a.firestore().collection("Meetings").doc(null===J||void 0===J?void 0:J.id).delete(),$(),e.push("/newleads")}}):u.a.createElement(f.a,{username:w,roomName:R,handleUsernameChange:F,handleRoomNameChange:z,handleSubmit:G,connecting:D})}}}]);
//# sourceMappingURL=38.f8a38c1b.chunk.js.map