{"version":3,"sources":["app/views/sessions/Signin.jsx"],"names":["SigninSchema","t","yup","shape","email","required","password","min","Signin","props","toggleAlert","name","setState","state","closeAlert","handleChange","event","persist","target","value","handleSubmit","isSubmitting","pathForRedirect","login","firebaseLoginEmailPassword","console","log","composeDialogOpen","warning","success","prevProps","prevState","snapshot","loginError","this","policy","className","style","backgroundImage","src","alt","initialValues","validationSchema","onSubmit","values","errors","touched","handleBlur","htmlFor","type","onChange","onBlur","to","href","rel","backgroundSize","onClick","facebookLogin","googleLogin","Component","connect","PropTypes","func","isRequired","string","user","withTranslation"],"mappings":"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","file":"static/js/123.ea67413a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Formik, Field, ErrorMessage } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport {\r\n  firebaseLoginEmailPassword,\r\n  facebookLogin,\r\n  googleLogin,\r\n} from \"app/redux/actions/LoginActions\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport SweetAlert from \"sweetalert2-react\";\r\nimport { withTranslation } from \"react-i18next\";\r\n\r\nconst SigninSchema = (t) =>\r\n  yup.object().shape({\r\n    email: yup.string().email(\"E-mail invalide\").required(t(\"Sign_in.18\")),\r\n    password: yup.string().min(8, t(\"Sign_in.22\")).required(t(\"Sign_in.19\")),\r\n    // policy: yup.boolean(true).required(t(\"Sign_in.20\")),\r\n    // acceptTerms: yup.bool().oneOf([true], t(\"Sign_in.21\")),\r\n  });\r\n\r\nclass Signin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      composeDialogOpen: false,\r\n      warning: false,\r\n      success: false,\r\n      email: \"\",\r\n      password: \"\",\r\n    };\r\n  }\r\n  // componentDidMount = () => {\r\n  //   console.log(this.props.location);\r\n  // };\r\n\r\n  // componentDidMount = () => {\r\n  //   if (window.self !== window.top) {\r\n  //     console.log(\"running in iframe\");\r\n  //   } else {\r\n  //     console.log(\"not running in iframe\");\r\n  //   }\r\n  // };\r\n\r\n  componentDidUpdate(prevProps, prevState, snapshot) {\r\n    if (prevProps.loginError !== this.props.loginError) {\r\n      if (this.props.loginError) {\r\n        this.toggleAlert(\"warning\");\r\n      }\r\n    }\r\n  }\r\n\r\n  toggleAlert = (name) => {\r\n    this.setState({ [name]: !this.state[name] });\r\n  };\r\n\r\n  closeAlert = (name) => {\r\n    this.setState({ [name]: false });\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    event.persist();\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  };\r\n\r\n  handleSubmit = (value, { isSubmitting }) => {\r\n    const { t } = this.props.t;\r\n    const pathForRedirect = this.props.pathForRedirect;\r\n    const login = this.props.firebaseLoginEmailPassword(value, this.props.t);\r\n    console.log(\"login\", login, pathForRedirect);\r\n  };\r\n\r\n  render() {\r\n    // console.log(\"route\", window.top.location.href);\r\n    const { t } = this.props;\r\n    const { warning } = this.state;\r\n\r\n    return (\r\n      <>\r\n        {console.log(\"policy\", this.state.policy)}\r\n        {/* {window.top.location.href === \"https://www.ziaway.ca/\" ? (\r\n          <h1>on wix site</h1>\r\n        ) : ( */}\r\n        <div\r\n          className=\"auth-layout-wrap\"\r\n          style={{\r\n            backgroundImage: \"url(/assets/images/new-home-2.jpg)\",\r\n          }}\r\n        >\r\n          <>\r\n            {/* <SweetAlert\r\n              show={warning}\r\n              title=\"Oups !\"\r\n              text=\"L'adresse email et le mot de passe ne concordent pas\"\r\n              onConfirm={() => this.toggleAlert(\"warning\")}\r\n            /> */}\r\n            <div className=\"auth-content\">\r\n              <div className=\"card o-hidden\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-md-6\">\r\n                    <div className=\"p-4\">\r\n                      <div className=\"auth-logo text-center mb-4\">\r\n                        <img src=\"/assets/images/logo.png\" alt=\"\" />\r\n                      </div>\r\n                      <h1 className=\"mb-3 text-18\">{t(\"Sign_in.1\")}</h1>\r\n                      <Formik\r\n                        initialValues={this.state}\r\n                        validationSchema={SigninSchema(t)}\r\n                        onSubmit={this.handleSubmit}\r\n                      >\r\n                        {({\r\n                          values,\r\n                          errors,\r\n                          touched,\r\n                          handleChange,\r\n                          handleBlur,\r\n                          handleSubmit,\r\n                          isSubmitting,\r\n                        }) => (\r\n                          <form onSubmit={handleSubmit}>\r\n                            <div className=\"form-group\">\r\n                              <label htmlFor=\"email\">{t(\"Sign_in.2\")}</label>\r\n                              <input\r\n                                className=\"form-control form-control-rounded position-relative\"\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                                value={values.email}\r\n                              />\r\n                              {errors.email && (\r\n                                <div className=\"text-danger mt-1 ml-2\">\r\n                                  {errors.email}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                              <label htmlFor=\"password\">{t(\"Sign_in.3\")}</label>\r\n                              <input\r\n                                className=\"form-control form-control-rounded\"\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                onChange={handleChange}\r\n                                onBlur={handleBlur}\r\n                                value={values.password}\r\n                              />\r\n                              {errors.password && (\r\n                                <div className=\"text-danger mt-1 ml-2\">\r\n                                  {errors.password}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                            {/* <div style={{ paddingLeft: \"22px\" }}>\r\n                              <Field\r\n                                type=\"checkbox\"\r\n                                name=\"acceptTerms\"\r\n                                className={\r\n                                  \"form-check-input \" +\r\n                                  (errors.acceptTerms && touched.acceptTerms\r\n                                    ? \" is-invalid\"\r\n                                    : \"\")\r\n                                }\r\n                              />\r\n                              <label\r\n                                htmlFor=\"acceptTerms\"\r\n                                className=\"form-check-label\"\r\n                              >\r\n                                {t(\"Sign_in.13\")} <br />\r\n                                <a\r\n                                  href=\"https://blog.ziaway.ca/politique-de-confidentialit%C3%A9\"\r\n                                  target=\"_blank\"\r\n                                  rel=\"noopener noreferrer\"\r\n                                >\r\n                                  {t(\"Sign_in.14\")}\r\n                                </a>\r\n                              </label>\r\n                              <ErrorMessage\r\n                                name=\"acceptTerms\"\r\n                                component=\"div\"\r\n                                className=\"invalid-feedback\"\r\n                              />\r\n                            </div> */}\r\n                            <button\r\n                              className=\"btn btn-rounded btn-primary btn-block mt-2\"\r\n                              type=\"submit\"\r\n                            >\r\n                              {t(\"Sign_in.4\")}\r\n                            </button>\r\n                          </form>\r\n                        )}\r\n                      </Formik>\r\n\r\n                      <div className=\"mt-3 text-center\">\r\n                        <Link\r\n                          to=\"/session/forgot-password\"\r\n                          className=\"text-muted\"\r\n                        >\r\n                          <u>{t(\"Sign_in.5\")}</u>\r\n                        </Link>\r\n                      </div>\r\n                      <div className=\"mt-1 text-center\">\r\n                        <a\r\n                          href=\"https://blog.ziaway.ca/politiques-de-confidentialite/\"\r\n                          className=\"text-muted\"\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                        >\r\n                          {\" \"}\r\n                          <u>{t(\"Sign_in.6\")} </u>\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div\r\n                    className=\"col-md-6 text-center \"\r\n                    style={{\r\n                      backgroundSize: \"cover\",\r\n                      backgroundImage: \"url(/assets/images/photo-long-3.jpg)\",\r\n                    }}\r\n                  >\r\n                    <div className=\"pr-3 auth-right\">\r\n                      <Link\r\n                        to=\"/session/signup\"\r\n                        //to=\"/evaluation-bien\"\r\n                        className=\"btn btn-rounded btn-outline-primary btn-outline-email btn-block btn-icon-text\"\r\n                      >\r\n                        <i className=\"i-Mail-with-At-Sign\"></i>\r\n                        {t(\"Sign_in.15\")}\r\n                        {/* {t(\"Sign_in.7\")} */}\r\n                      </Link>\r\n                      {/* <a\r\n                        href=\"https://blog.ziaway.ca\"\r\n                        className=\"btn btn-rounded btn-primary btn-block btn-icon-text\"\r\n                      >\r\n                        {t(\"Sign_in.8\")}\r\n                      </a> */}\r\n                      <Button\r\n                        onClick={() => this.props.facebookLogin(t)}\r\n                        className=\"btn btn-rounded btn-block btn-icon-text btn-outline-facebook\"\r\n                      >\r\n                        <i className=\"i-Facebook-2\"></i> {t(\"Sign_in.16\")}\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => this.props.googleLogin(t)}\r\n                        className=\"btn btn-rounded btn-outline-google btn-block btn-icon-text\"\r\n                      >\r\n                        <i className=\"i-Google-Plus\"></i> {t(\"Sign_in.17\")}\r\n                      </Button>\r\n\r\n                      {/** \r\n                  <Button className=\"btn btn-rounded btn-outline-google btn-block btn-icon-text\">\r\n                    <i className=\"i-Google-Plus\"></i>S'inscrire avec  Google\r\n                  </Button>\r\n                  <Button className=\"btn btn-rounded btn-block btn-icon-text btn-outline-facebook\">\r\n                    <i className=\"i-Facebook-2\"></i>S'inscrire avec Facebook\r\n                  </Button>\r\n                  */}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        </div>\r\n        // )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  firebaseLoginEmailPassword: PropTypes.func.isRequired,\r\n  facebookLogin: PropTypes.func.isRequired,\r\n  googleLogin: PropTypes.func.isRequired,\r\n  pathForRedirect: PropTypes.string.isRequired,\r\n  loginError: state.login.loginError,\r\n  user: state.user,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  firebaseLoginEmailPassword,\r\n  facebookLogin,\r\n  googleLogin,\r\n})(withTranslation()(Signin));\r\n"],"sourceRoot":""}